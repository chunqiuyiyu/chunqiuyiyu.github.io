<%- partial('_partial/header') %>
<article class="post">
  <div class="post-title">
    <h1 class="article-title"><%= page.title %></h1>
  </div>
   <div class="post-meta">
    <span class="post-time"><%- date(page.date, "YYYY-MM-DD") %></span>
  </div>
  <div class="post-content">
    <%- page.content %>
  </div>
  <div class="post-footer">
    <% if (page.tags && page.tags.length){ %>
      <%- list_tags(page.tags, {
        show_count: false,
        class: 'post-tag'
      }) %>
    <% } %>
    
    <div>
      <a href="javascript:void(0)" class="load"><%= __('Post.Load') %></a>
      <a href="#top" class="top"><%= __('Post.Top') %></a>
    </div>
  </div>
</article>
<script>
  (function(){
    if (localStorage.getItem('hashover') === location.href.replace(location.hash, '')) {
      loadComments();
    }
    
    var dom = document.getElementsByClassName('load')[0];
    dom.addEventListener('click', function(){
      loadComments();
    });

    function loadComments() {
      if (!document.getElementById('comment-script')) {
        var article = document.getElementsByTagName('article')[0];
        var script = document.createElement('script');
        script.src = '/hashover/hashover.js';
        script.id = 'comment-script'
        script.asyc = true;

        article.appendChild(script);
        localStorage.setItem('hashover', location.href.replace(location.hash, ''));
      }
    }
  })();
</script>
<%- partial('_partial/footer') %>